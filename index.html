<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Riszy Shop รับสินค้า Pro</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<style>
body {
    margin:0;
    font-family: 'Poppins', sans-serif;
    background: #e6f2e6;
    color: #004d00;
}
.container {
    max-width: 500px;
    margin: 30px auto;
    background: #fff;
    padding: 30px;
    border-radius: 25px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.2);
    text-align: center;
}
.logo { width: 120px; margin-bottom: 10px; }
h1 { margin:15px 0 25px; font-weight:700; color:#004d00; font-size:24px; }

.instructions {
    font-size:14px;
    background:#f0fff0;
    padding:12px;
    border-radius:15px;
    margin-top:15px;
    color:#004d00;
    text-align:left;
    line-height:1.5;
}

label { display:block; margin:15px 0 5px; font-weight:600; text-align:left; }
input, button { 
    width:100%; padding:12px; border-radius:15px; border:1px solid #b3ffb3; font-size:16px; box-sizing:border-box; margin-bottom:15px;
}
input:focus { outline:none; border-color:#00b300; box-shadow:0 0 10px #00b300; }

button {
    background:#00b300; color:#fff; cursor:pointer; font-weight:600; border:none; transition:0.3s;
}
button:hover { background:#33cc33; }

.product-options {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    justify-content: center;
    margin-bottom: 15px;
}
.product-box {
    flex: 1 1 45%;
    background: #ccffcc;
    padding: 12px;
    border-radius: 15px;
    cursor: pointer;
    transition:0.3s;
    border:2px solid transparent;
    font-weight:600;
}
.product-box.selected { border-color:#00b300; background:#99ff99; }
.product-box:hover { background:#b3ffb3; }

#loaderContainer { display:none; text-align:center; margin-top:15px;}
#loaderBar { width:100%; background:#b3ffb3; border-radius:15px; overflow:hidden; margin-top:20px;}
#loaderProgress { width:0; height:20px; background:#00b300; border-radius:15px; }

#result {
    display:none;
    background:#ccffcc;
    padding:20px;
    border-radius:20px;
    margin-top:20px;
    word-break: break-word;
    box-shadow:0 6px 15px rgba(0,0,0,0.2);
    text-align:left;
}
.copyBtn, .linkBtn {
    margin-top:10px;
    width:48%;
    display:inline-block;
    border-radius:15px;
    font-weight:600;
    text-align:center;
    line-height:40px;
}
.copyBtn { background:#009900; color:#fff; cursor:pointer; }
.copyBtn:hover { background:#00cc00; }
.linkBtn { background:#006600; color:#fff; text-decoration:none; }
.linkBtn:hover { background:#009900; }

.modal, .errorPopup, .copyPopup {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 50%;
    top: 50%;
    transform: translate(-50%,-50%);
    width: 90%;
    max-width: 400px;
    backdrop-filter: blur(4px);
}
.modal-content, .errorPopup, .copyPopup {
    background: linear-gradient(145deg, #ffffff, #f0fff0);
    padding: 25px 30px;
    border-radius: 20px;
    text-align: center;
    box-shadow: 0 10px 25px rgba(0,0,0,0.3);
    animation: popIn 0.4s ease-out forwards;
    font-weight:600;
}
.closeModal {
    position: absolute;
    top: 10px; right: 15px;
    font-size: 22px;
    font-weight: bold;
    color: #004d00;
    background: #ccffcc;
    border-radius: 50%;
    width: 28px; height: 28px;
    line-height: 28px;
    cursor: pointer;
    transition: 0.3s;
}
.closeModal:hover { background: #99ff99; transform: scale(1.2); }
.errorPopup { border-left:5px solid #ff4d4d; background:#ffeaea; }
.copyPopup { border-left:5px solid #009900; background:#e6ffe6; }

@keyframes popIn {
    0% { transform: translate(-50%,-50%) scale(0.7); opacity: 0; }
    100% { transform: translate(-50%,-50%) scale(1); opacity: 1; }
}
</style>
</head>
<body>

<div class="container">
    <img src="https://i.postimg.cc/prfwD1yC/22-B127-BF3.png" class="logo">
    <h1>Riszy Shop รับสินค้า Pro</h1>

    <div class="instructions">
        <b>คำเตือน:</b> ห้ามรีเฟรชเว็บเด็ดขาด
    </div>

    <div id="formContainer">
        <label for="username">ชื่อในเว็บ</label>
        <input type="text" id="username" placeholder="กรอกชื่อในเว็บ">

        <label>เลือกสินค้า</label>
        <div class="product-options">
            <div class="product-box" data-value="Fluorite1">Fluorite 1 วัน</div>
            <div class="product-box" data-value="Fluorite7">Fluorite 7 วัน</div>
            <div class="product-box" data-value="Fluorite31">Fluorite 31 วัน</div>
            <div class="product-box" data-value="GBOX">GBOX</div>
        </div>

        <label for="code">กรอกโค้ด</label>
        <input type="text" id="code" placeholder="กรุณากรอกโค้ดที่ได้จากประวัติการสั่งซื้อ">

        <button id="submitBtn">ยืนยัน</button>
    </div>

    <div id="loaderContainer">
        <div>กำลังโหลด... <span id="loaderPercent">0%</span></div>
        <div id="loaderBar"><div id="loaderProgress"></div></div>
    </div>

    <div id="result">
        <h2>ข้อมูลที่กรอก</h2>
        <div id="resultContent"></div>
        <div style="margin-top:10px;">
            <button class="copyBtn" id="copyBtn">คัดลอกข้อมูลทั้งหมด</button>
            <a class="linkBtn" href="https://riszy.shop/?page=contact" target="_blank">ติดต่อแอดมิน</a>
        </div>
        <p class="timeDisplay" id="currentTime">เวลา: --:--:--</p>
        <p style="margin-top:10px; color:#004d00; font-weight:bold;">กรุณาคัดลอกข้อมูลส่งให้แอดมิน</p>
    </div>
</div>

<div id="modal" class="modal">
    <div class="modal-content">
        <span class="closeModal" id="closeModal">&times;</span>
        <p id="modalText"></p>
    </div>
</div>
<div class="errorPopup" id="errorPopup"></div>
<div class="copyPopup" id="copyPopup">คัดลอกข้อมูลเรียบร้อย!</div>

<script>
const productBoxes = document.querySelectorAll('.product-box');
let selectedProduct = 'Fluorite1';
productBoxes.forEach(box=>{
    box.addEventListener('click', ()=>{
        productBoxes.forEach(b=>b.classList.remove('selected'));
        box.classList.add('selected');
        selectedProduct = box.getAttribute('data-value');
    });
});

const submitBtn = document.getElementById('submitBtn');
const usernameInput = document.getElementById('username');
const codeInput = document.getElementById('code');
const formContainer = document.getElementById('formContainer');
const loaderContainer = document.getElementById('loaderContainer');
const loaderProgress = document.getElementById('loaderProgress');
const loaderPercent = document.getElementById('loaderPercent');
const resultDiv = document.getElementById('result');
const resultContent = document.getElementById('resultContent');
const copyBtn = document.getElementById('copyBtn');

const modal = document.getElementById('modal');
const closeModal = document.getElementById('closeModal');
const modalText = document.getElementById('modalText');
const errorPopup = document.getElementById('errorPopup');
const copyPopup = document.getElementById('copyPopup');

function showError(message){
    errorPopup.textContent = message;
    errorPopup.style.display = 'block';
    setTimeout(()=>{ errorPopup.style.display='none'; },3000);
}
function showModal(message){
    modalText.textContent = message;
    modal.style.display = 'block';
}
closeModal.onclick = ()=>{ modal.style.display="none"; }
window.onclick = (event)=>{ if(event.target==modal) modal.style.display="none"; }
function showCopyPopup(){
    copyPopup.style.display='block';
    setTimeout(()=>{ copyPopup.style.display='none'; },2000);
}
function validateCode(code, product){
    const patterns = {
        'Fluorite1': /^RSFD1\d+$/,
        'Fluorite7': /^RSFD7\d+$/,
        'Fluorite31': /^RSFD31\d+$/,
        'GBOX': /^RSGB29\d+$/
    };
    return patterns[product].test(code);
}
submitBtn.addEventListener('click', ()=>{
    const username = usernameInput.value.trim();
    const code = codeInput.value.trim();
    if(!username||!code){ showError('กรุณากรอกข้อมูลให้ครบทุกช่อง'); return; }
    if(!validateCode(code, selectedProduct)){ showError('โค้ดไม่ถูกต้องตามรูปแบบ'); return; }

    formContainer.style.display='none';
    loaderContainer.style.display='block';
    loaderProgress.style.width='0%'; loaderPercent.textContent='0%';
    let progress = 0;
    const interval = setInterval(()=>{
        progress+=Math.floor(Math.random()*10)+5;
        if(progress>100) progress=100;
        loaderProgress.style.width=progress+'%';
        loaderPercent.textContent=progress+'%';
        if(progress===100){
            clearInterval(interval);
            loaderContainer.style.display='none';
            showResult(username, selectedProduct, code);
        }
    },200);
});

function showResult(username, product, code){
    const now = new Date();
    const h = String(now.getHours()).padStart(2,'0');
    const m = String(now.getMinutes()).padStart(2,'0');
    let idPrefix = username.charAt(0)+(username.length>=3?username.charAt(2):username.charAt(1)||'');
    let remaining = username.slice(3);
    const userID = `${idPrefix}${h}${m}${remaining}`;

    const productName = {
        'Fluorite1':'Fluorite 1 วัน',
        'Fluorite7':'Fluorite 7 วัน',
        'Fluorite31':'Fluorite 31 วัน',
        'GBOX':'GBOX'
    };
    resultContent.innerHTML = `
        ชื่อในเว็บ: <b>${username}</b><br>
        User ID: <b>${userID}</b><br>
        สินค้าที่ซื้อ: <b>${productName[product]}</b><br>
        โค้ดที่กรอก: <b>${code}</b>
    `;
    resultDiv.style.display='block';
    updateTime();
}

copyBtn.addEventListener('click', ()=>{
    navigator.clipboard.writeText(resultContent.innerText).then(()=>showCopyPopup());
});

function updateTime(){
    const timeEl = document.getElementById('currentTime');
    setInterval(()=>{
        const now = new Date();
        const h = String(now.getHours()).padStart(2,'0');
        const m = String(now.getMinutes()).padStart(2,'0');
        const s = String(now.getSeconds()).padStart(2,'0');
        timeEl.textContent = `เวลา: ${h}:${m}:${s}`;
    },1000);
}
</script>
</body>
</html>
